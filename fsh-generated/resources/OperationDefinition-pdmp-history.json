{
  "resourceType": "OperationDefinition",
  "id": "pdmp-history",
  "url": "http://hl7.org/fhir/us/pdmp/OperationDefinition/pdmp-history",
  "extension": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-wg",
      "valueCode": "phx"
    }
  ],
  "version": "1.0.0",
  "name": "PdmpOperationGetPdmpHistory",
  "title": "PDMP Operation Get PDMP History",
  "status": "active",
  "kind": "operation",
  "date": "2023-11-29",
  "publisher": "HL7 International / Pharmacy",
  "contact": [
    {
      "name": "HL7 International / Pharmacy",
      "telecom": [
        {
          "system": "url",
          "value": "http://www.hl7.org/Special/committees/medication"
        }
      ]
    },
    {
      "name": "Frank McKinney",
      "telecom": [
        {
          "system": "url",
          "value": "frank.mckinney@pocp.com"
        },
        {
          "system": "email",
          "value": "fm@frankmckinney.com"
        }
      ]
    }
  ],
  "description": "Operation returning an individual patient's PDMP history",
  "jurisdiction": [
    {
      "coding": [
        {
          "code": "US",
          "system": "urn:iso:std:iso:3166",
          "display": "United States of America"
        }
      ]
    }
  ],
  "affectsState": false,
  "code": "pdmp-history",
  "system": true,
  "type": false,
  "instance": false,
  "inputProfile": "http://hl7.org/fhir/us/pdmp/StructureDefinition/pdmp-parameters-request-operation",
  "outputProfile": "http://hl7.org/fhir/us/pdmp/StructureDefinition/pdmp-parameters-response-operation",
  "parameter": [
    {
      "name": "patient",
      "use": "in",
      "min": 1,
      "max": "1",
      "documentation": "The patient whose PDMP history is desired",
      "type": "Patient"
    },
    {
      "name": "animal-owner",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "If the patient is an animal, this parameter reflects its owner's information",
      "type": "RelatedPerson"
    },
    {
      "name": "authorized-practitioner",
      "use": "in",
      "min": 1,
      "max": "1",
      "documentation": "The Practitioner resource reflecting the provider who is authorized to view the returned PDMP information",
      "type": "Practitioner"
    },
    {
      "name": "authorized-practitioner-role",
      "use": "in",
      "min": 1,
      "max": "1",
      "documentation": "The PractitionerRole resource reflecting the authorized provider's practice information",
      "type": "PractitionerRole"
    },
    {
      "name": "authorized-practitioner-organization",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "An Organization resource reflecting the authorized provider's organization",
      "type": "Organization"
    },
    {
      "name": "delegate-practitioner",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "A Practitioner resource reflecting a provider who is requesting the PDMP information on behalf of another party",
      "type": "Practitioner"
    },
    {
      "name": "delegate-practitioner-role",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "A PractitionerRole resource reflecting the delegate's practice information",
      "type": "PractitionerRole"
    },
    {
      "name": "delegate-organization",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "An Organization resource reflecting the delegate's organization",
      "type": "Organization"
    },
    {
      "name": "pre-stage-only",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "Indicates that the PDMP Responder is expected to gather the requested information and stage it for future retrieval (via a subsequent invocation of this operation)",
      "type": "boolean"
    },
    {
      "name": "pre-stage-retrieval-key",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "The pre-stage-retrieval-key returned from a previous operation call in which the pre-stage-only parameter was set to true",
      "type": "string"
    },
    {
      "name": "pdmp-history-result",
      "use": "out",
      "min": 0,
      "max": "1",
      "documentation": "A Bundle of type 'searchset' that contains medication dispense and administration information for the requested patient (if found) and/or OperationOutcome resource(s) with processing information",
      "type": "Bundle"
    },
    {
      "name": "pre-stage-retrieval-key",
      "use": "out",
      "min": 0,
      "max": "1",
      "documentation": "This parameter is used only when responding to an invocation in which the pre-stage-only parameter was set to true. This element may be populated with a string value that the requester is to submit in the pre-stage-retrieval-key parameter of the subsequent invocation that retrieves the staged information",
      "type": "string"
    }
  ]
}
